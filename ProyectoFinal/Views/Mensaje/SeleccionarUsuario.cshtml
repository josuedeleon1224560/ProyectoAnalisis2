@using Microsoft.AspNetCore.Identity;
@model ProyectoFinal.ViewModels.SeleccionarUsuarioViewModel
@inject UserManager<AppUser> UserManager

@{
    var userName = User.Identity.Name;
    var userId = "";
    var userCUI = "";
    if (!string.IsNullOrEmpty(userName))
    {
        var user = await UserManager.FindByNameAsync(userName);
        if (user != null)
        {
            userId = user.Id;
            userCUI = user.CUI;
        }
    }

}

@* @{
    ViewData["Title"] = "Seleccionar Usuario";
} *@
<div class="container">
    <div class="sub-body">
<h2>Seleccionar Usuario</h2>

<form asp-controller="Mensaje" asp-action="VerMensajesUsuario" method="get">
    <div class="form-group">
        <label for="nombreUsuario">Seleccionar Usuario:</label>
        <select asp-for="CUI" class="form-control">
            <option value="">Seleccionar Usuario</option>
            @foreach (var usuario in Model.UsuariosDisponibles)
            {
                <option value="@usuario.CUI">@usuario.Nombres</option>
            }
        </select>
    </div>
    <button type="submit" class="btn btn-primary">Ver Mensajes del Usuario</button>
</form>
    </div>
</div>