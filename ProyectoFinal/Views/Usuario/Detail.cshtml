@using Microsoft.AspNetCore.Identity;
@using ProyectoFinal.ViewModels
@model UserDetailViewModel
@inject UserManager<AppUser> UserManager

@{
    var userName = User.Identity.Name;
    var userId = "";
    var userCUI = "";
    if (!string.IsNullOrEmpty(userName))
    {
        var user = await UserManager.FindByNameAsync(userName);
        if (user != null)
        {
            userId = user.Id;
            userCUI = user.CUI;
        }
    }

}

@{
    ViewData["Title"] = "Inicio";
    string estilos = "/css/General.css";
}

@section Estilos
    {
    <link rel="stylesheet" type="text/css" href="@estilos" />
}

@section Header
    {
    <div class="info-personal-view-container">
        <header class="header-user-info">
            <div class="logo-header-user-info">
                <svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 576 512">
                    <!--! Font Awesome Free 6.4.2 by fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. -->
                    <style>
                        svg {
                            fill: #ffffff
                        }</style>
                    <path d="M304 240V16.6c0-9 7-16.6 16-16.6C443.7 0 544 100.3 544 224c0 9-7.6 16-16.6 16H304zM32 272C32 150.7 122.1 50.3 239 34.3c9.2-1.3 17 6.1 17 15.4V288L412.5 444.5c6.7 6.7 6.2 17.7-1.5 23.1C371.8 495.6 323.8 512 272 512C139.5 512 32 404.6 32 272zm526.4 16c9.3 0 16.6 7.8 15.4 17c-7.7 55.9-34.6 105.6-73.9 142.3c-6 5.6-15.4 5.2-21.2-.7L320 288H558.4z" />
                </svg>
                <h2>T CONSULTING S.A</h2>
            </div>

            <nav class="User-nav-bar-info">
                <a asp-area="" class="nav-link" asp-controller="Usuario" asp-action="Index">Inicio</a>
                <a href="#">Estado de cuenta</a>
                <a asp-area="" class="nav-link" asp-controller="Usuario" asp-action="Crear">Solicitudes</a>
                <a href="#">Prestamos</a>
            </nav>
            <button> <a asp-area="" class="nav-link" asp-controller="Account" asp-action="Logout">Cerrar Sesion</a></button>
        </header>
    }


    <div class="info-personal-view-sub-body">
        <div class="personal-data-view">
        @if (!string.IsNullOrEmpty(Model.Fotografia))
        {
                <img src="@Model.Fotografia" alt="Fotografía" />
        }
        else
        {
                <p>Sin Fotografía</p>
        }

            <div class="personal-data-info-view">
                <div class="names-space">
                    <label asp-for="Nombres">@Model.Nombres</label>
                    <label asp-for="Apellidos">@Model.Apellidos</label>
                </div>
                <div class="all-data-container">
                    <div class="contact-data-section-1">
                        <div class="contact-data">
                            <label>Numero Telefonico:</label>
                            <label asp-for="Telefono">@Model.Telefono</label>
                        </div>
                        <div class="contact-data">
                            <label>Direccion:</label>
                            <label asp-for="DireccionId">@Model.DireccionUsuario</label>
                        </div>
                        <div class="rol-data">
                            <label>DPI</label>
                            <label asp-for="CUI">@Model.CUI</label>
                        </div>
                    </div>
                    <div class="contact-data-section-2">
                        <div class="contact-data-2">
                            <label>Puesto:</label>
                            <label>@Model.Puesto</label>
                        </div>
                        <div class="contact-data-2">
                            <label>Departamento:</label>
                            <label>@Model.DepartamentoPuesto</label>
                        </div>
                        <div class="rol-data">
                            <label>ROL</label>
                            <label>
                                <ul>
                                @foreach (var role in Model.Roles)
                                {
                                        <li>@role</li>
                                }
                                </ul>
                            </label>
                        </div>
                    </div>
                </div>


            </div>
        </div>
    </div>

